{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///angular-text-input-highlight.umd.min.js","webpack:///webpack/bootstrap f84ff9baa095606dad66","webpack:///external {\"root\":[\"ng\",\"core\"],\"commonjs\":\"@angular/core\",\"commonjs2\":\"@angular/core\",\"amd\":\"@angular/core\"}","webpack:///./src/index.ts","webpack:///./src/text-input-highlight.module.ts","webpack:///external {\"root\":[\"ng\",\"common\"],\"commonjs\":\"@angular/common\",\"commonjs2\":\"@angular/common\",\"amd\":\"@angular/common\"}","webpack:///./src/text-input-highlight.component.ts","webpack:///./src/text-input-highlight-container.directive.ts","webpack:///./src/text-input-element.directive.ts"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","core_1","common_1","text_input_highlight_component_1","text_input_highlight_container_directive_1","text_input_element_directive_1","TextInputHighlightModule","NgModule","declarations","TextInputHighlightComponent","TextInputHighlightContainerDirective","TextInputElementDirective","imports","CommonModule","indexIsInsideTag","index","tag","indices","start","end","overlaps","tagA","tagB","isCoordinateWithinRect","rect","x","y","left","right","top","bottom","escapeHtml","str","replace","__metadata","k","v","metadata","styleProperties","freeze","renderer","cdr","tagCssClass","tags","tagClick","EventEmitter","tagMouseEnter","tagMouseLeave","highlightElementContainerStyle","textareaEventListeners","isDestroyed","refresh","_this","computed","getComputedStyle","textInputElement","forEach","prop","ngOnChanges","changes","textInputElementChanged","textInputValue","addTags","ngOnDestroy","unregister","onWindowResize","elementType","tagName","toLowerCase","Error","setTimeout","listen","highlightElement","nativeElement","scrollTop","highlightTagElements","map","clientRect","element","getBoundingClientRect","observers","onClick","event","handleTextareaMouseEvent","push","onMouseMove","onMouseLeave","mouseHoveredTag","emit","undefined","prevTags","parts","slice","sort","prevTag","expectedTagLength","tagContents","previousIndex","before_1","cssClass","tagId","indexOf","remainingIndex","remaining","highlightedText","join","detectChanges","Array","from","getElementsByTagName","eventName","matchingTagIndex","findIndex","elm","clientX","clientY","tagClass","classList","find","className","startsWith","tagMouseEvent","Input","String","HTMLTextAreaElement","Output","ViewChild","ElementRef","HostListener","Function","Component","selector","template","Renderer2","ChangeDetectorRef","Directive","host","[class.text-input-highlight-container]","[class.text-input-element]"],"mappings":"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","file":"angular-text-input-highlight.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@angular/core\"), require(\"@angular/common\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@angular/core\", \"@angular/common\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angularTextInputHighlight\"] = factory(require(\"@angular/core\"), require(\"@angular/common\"));\n\telse\n\t\troot[\"angularTextInputHighlight\"] = factory(root[\"ng\"][\"core\"], root[\"ng\"][\"common\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@angular/core\"), require(\"@angular/common\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@angular/core\", \"@angular/common\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angularTextInputHighlight\"] = factory(require(\"@angular/core\"), require(\"@angular/common\"));\n\telse\n\t\troot[\"angularTextInputHighlight\"] = factory(root[\"ng\"][\"core\"], root[\"ng\"][\"common\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(2));\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar common_1 = __webpack_require__(3);\r\nvar text_input_highlight_component_1 = __webpack_require__(4);\r\nvar text_input_highlight_container_directive_1 = __webpack_require__(5);\r\nvar text_input_element_directive_1 = __webpack_require__(6);\r\nvar TextInputHighlightModule = /** @class */ (function () {\r\n    function TextInputHighlightModule() {\r\n    }\r\n    TextInputHighlightModule = __decorate([\r\n        core_1.NgModule({\r\n            declarations: [\r\n                text_input_highlight_component_1.TextInputHighlightComponent,\r\n                text_input_highlight_container_directive_1.TextInputHighlightContainerDirective,\r\n                text_input_element_directive_1.TextInputElementDirective\r\n            ],\r\n            imports: [common_1.CommonModule],\r\n            exports: [\r\n                text_input_highlight_component_1.TextInputHighlightComponent,\r\n                text_input_highlight_container_directive_1.TextInputHighlightContainerDirective,\r\n                text_input_element_directive_1.TextInputElementDirective\r\n            ]\r\n        })\r\n    ], TextInputHighlightModule);\r\n    return TextInputHighlightModule;\r\n}());\r\nexports.TextInputHighlightModule = TextInputHighlightModule;\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar styleProperties = Object.freeze([\r\n    'direction',\r\n    'boxSizing',\r\n    'width',\r\n    'height',\r\n    'overflowX',\r\n    'overflowY',\r\n    'borderTopWidth',\r\n    'borderRightWidth',\r\n    'borderBottomWidth',\r\n    'borderLeftWidth',\r\n    'borderStyle',\r\n    'paddingTop',\r\n    'paddingRight',\r\n    'paddingBottom',\r\n    'paddingLeft',\r\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/font\r\n    'fontStyle',\r\n    'fontVariant',\r\n    'fontWeight',\r\n    'fontStretch',\r\n    'fontSize',\r\n    'fontSizeAdjust',\r\n    'lineHeight',\r\n    'fontFamily',\r\n    'textAlign',\r\n    'textTransform',\r\n    'textIndent',\r\n    'textDecoration',\r\n    'letterSpacing',\r\n    'wordSpacing',\r\n    'tabSize',\r\n    'MozTabSize'\r\n]);\r\nvar tagIndexIdPrefix = 'text-highlight-tag-id-';\r\nfunction indexIsInsideTag(index, tag) {\r\n    return tag.indices.start < index && index < tag.indices.end;\r\n}\r\nfunction overlaps(tagA, tagB) {\r\n    return (indexIsInsideTag(tagB.indices.start, tagA) ||\r\n        indexIsInsideTag(tagB.indices.end, tagA));\r\n}\r\nfunction isCoordinateWithinRect(rect, x, y) {\r\n    return rect.left < x && x < rect.right && (rect.top < y && y < rect.bottom);\r\n}\r\nfunction escapeHtml(str) {\r\n    return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n}\r\nvar TextInputHighlightComponent = /** @class */ (function () {\r\n    function TextInputHighlightComponent(renderer, cdr) {\r\n        this.renderer = renderer;\r\n        this.cdr = cdr;\r\n        /**\r\n         * The CSS class to add to highlighted tags\r\n         */\r\n        this.tagCssClass = '';\r\n        /**\r\n         * An array of indices of the textarea value to highlight\r\n         */\r\n        this.tags = [];\r\n        /**\r\n         * Called when the area over a tag is clicked\r\n         */\r\n        this.tagClick = new core_1.EventEmitter();\r\n        /**\r\n         * Called when the area over a tag is moused over\r\n         */\r\n        this.tagMouseEnter = new core_1.EventEmitter();\r\n        /**\r\n         * Called when the area over the tag has the mouse is removed from it\r\n         */\r\n        this.tagMouseLeave = new core_1.EventEmitter();\r\n        /**\r\n         * @private\r\n         */\r\n        this.highlightElementContainerStyle = {};\r\n        this.textareaEventListeners = [];\r\n        this.isDestroyed = false;\r\n    }\r\n    /**\r\n     * Manually call this function to refresh the highlight element if the textarea styles have changed\r\n     */\r\n    TextInputHighlightComponent.prototype.refresh = function () {\r\n        var _this = this;\r\n        var computed = getComputedStyle(this.textInputElement);\r\n        styleProperties.forEach(function (prop) {\r\n            _this.highlightElementContainerStyle[prop] = computed[prop];\r\n        });\r\n    };\r\n    /**\r\n     * @private\r\n     */\r\n    TextInputHighlightComponent.prototype.ngOnChanges = function (changes) {\r\n        if (changes.textInputElement) {\r\n            this.textInputElementChanged();\r\n        }\r\n        if (changes.tags || changes.tagCssClass || changes.textInputValue) {\r\n            this.addTags();\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     */\r\n    TextInputHighlightComponent.prototype.ngOnDestroy = function () {\r\n        this.isDestroyed = true;\r\n        this.textareaEventListeners.forEach(function (unregister) { return unregister(); });\r\n    };\r\n    /**\r\n     * @private\r\n     */\r\n    TextInputHighlightComponent.prototype.onWindowResize = function () {\r\n        this.refresh();\r\n    };\r\n    TextInputHighlightComponent.prototype.textInputElementChanged = function () {\r\n        var _this = this;\r\n        var elementType = this.textInputElement.tagName.toLowerCase();\r\n        if (elementType !== 'textarea') {\r\n            throw new Error('The angular-text-input-highlight component must be passed ' +\r\n                'a textarea to the `textInputElement` input. Instead received a ' +\r\n                elementType);\r\n        }\r\n        setTimeout(function () {\r\n            // in case the element was destroyed before the timeout fires\r\n            if (!_this.isDestroyed) {\r\n                _this.refresh();\r\n                _this.textareaEventListeners.forEach(function (unregister) { return unregister(); });\r\n                _this.textareaEventListeners = [\r\n                    _this.renderer.listen(_this.textInputElement, 'input', function () {\r\n                        _this.addTags();\r\n                    }),\r\n                    _this.renderer.listen(_this.textInputElement, 'click', function () {\r\n                        _this.addTags();\r\n                    }),\r\n                    _this.renderer.listen(_this.textInputElement, 'keyup', function () {\r\n                        _this.addTags();\r\n                    }),\r\n                    _this.renderer.listen(_this.textInputElement, 'change', function () {\r\n                        _this.addTags();\r\n                    }),\r\n                    _this.renderer.listen(_this.textInputElement, 'scroll', function () {\r\n                        _this.highlightElement.nativeElement.scrollTop = _this.textInputElement.scrollTop;\r\n                        _this.highlightTagElements = _this.highlightTagElements.map(function (tag) {\r\n                            tag.clientRect = tag.element.getBoundingClientRect();\r\n                            return tag;\r\n                        });\r\n                    })\r\n                ];\r\n                // only add event listeners if the host component actually asks for it\r\n                if (_this.tagClick.observers.length > 0) {\r\n                    var onClick = _this.renderer.listen(_this.textInputElement, 'click', function (event) {\r\n                        _this.handleTextareaMouseEvent(event, 'click');\r\n                    });\r\n                    _this.textareaEventListeners.push(onClick);\r\n                }\r\n                if (_this.tagMouseEnter.observers.length > 0) {\r\n                    var onMouseMove = _this.renderer.listen(_this.textInputElement, 'mousemove', function (event) {\r\n                        _this.handleTextareaMouseEvent(event, 'mousemove');\r\n                    });\r\n                    var onMouseLeave = _this.renderer.listen(_this.textInputElement, 'mouseleave', function (event) {\r\n                        if (_this.mouseHoveredTag) {\r\n                            _this.tagMouseLeave.emit(_this.mouseHoveredTag);\r\n                            _this.mouseHoveredTag = undefined;\r\n                        }\r\n                    });\r\n                    _this.textareaEventListeners.push(onMouseMove);\r\n                    _this.textareaEventListeners.push(onMouseLeave);\r\n                }\r\n                _this.addTags();\r\n            }\r\n        });\r\n    };\r\n    TextInputHighlightComponent.prototype.addTags = function () {\r\n        var _this = this;\r\n        var textInputValue = typeof this.textInputValue !== 'undefined'\r\n            ? this.textInputValue\r\n            : this.textInputElement.value;\r\n        var prevTags = [];\r\n        var parts = [];\r\n        this.tags.slice().sort(function (tagA, tagB) {\r\n            return tagA.indices.start - tagB.indices.start;\r\n        })\r\n            .forEach(function (tag) {\r\n            if (tag.indices.start > tag.indices.end) {\r\n                throw new Error(\"Highlight tag with indices [\" + tag.indices.start + \", \" + tag.indices\r\n                    .end + \"] cannot start after it ends.\");\r\n            }\r\n            prevTags.forEach(function (prevTag) {\r\n                if (overlaps(prevTag, tag)) {\r\n                    throw new Error(\"Highlight tag with indices [\" + tag.indices.start + \", \" + tag.indices\r\n                        .end + \"] overlaps with tag [\" + prevTag.indices.start + \", \" + prevTag\r\n                        .indices.end + \"]\");\r\n                }\r\n            });\r\n            // TODO - implement this as an ngFor of items that is generated in the template for a cleaner solution\r\n            var expectedTagLength = tag.indices.end - tag.indices.start;\r\n            var tagContents = textInputValue.slice(tag.indices.start, tag.indices.end);\r\n            if (tagContents.length === expectedTagLength) {\r\n                var previousIndex = prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\r\n                var before_1 = textInputValue.slice(previousIndex, tag.indices.start);\r\n                parts.push(escapeHtml(before_1));\r\n                var cssClass = tag.cssClass || _this.tagCssClass;\r\n                var tagId = tagIndexIdPrefix + _this.tags.indexOf(tag);\r\n                // text-highlight-tag-id-${id} is used instead of a data attribute to prevent an angular sanitization warning\r\n                parts.push(\"<span class=\\\"text-highlight-tag \" + tagId + \" \" + cssClass + \"\\\">\" + escapeHtml(tagContents) + \"</span>\");\r\n                prevTags.push(tag);\r\n            }\r\n        });\r\n        var remainingIndex = prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\r\n        var remaining = textInputValue.slice(remainingIndex);\r\n        parts.push(escapeHtml(remaining));\r\n        parts.push('&nbsp;');\r\n        this.highlightedText = parts.join('');\r\n        this.cdr.detectChanges();\r\n        this.highlightTagElements = Array.from(this.highlightElement.nativeElement.getElementsByTagName('span')).map(function (element) {\r\n            return { element: element, clientRect: element.getBoundingClientRect() };\r\n        });\r\n    };\r\n    TextInputHighlightComponent.prototype.handleTextareaMouseEvent = function (event, eventName) {\r\n        var matchingTagIndex = this.highlightTagElements.findIndex(function (elm) {\r\n            return isCoordinateWithinRect(elm.clientRect, event.clientX, event.clientY);\r\n        });\r\n        if (matchingTagIndex > -1) {\r\n            var target = this.highlightTagElements[matchingTagIndex].element;\r\n            var tagClass = Array.from(target.classList).find(function (className) {\r\n                return className.startsWith(tagIndexIdPrefix);\r\n            });\r\n            if (tagClass) {\r\n                var tagId = tagClass.replace(tagIndexIdPrefix, '');\r\n                var tag = this.tags[+tagId];\r\n                var tagMouseEvent = { tag: tag, target: target, event: event };\r\n                if (eventName === 'click') {\r\n                    this.tagClick.emit(tagMouseEvent);\r\n                }\r\n                else if (!this.mouseHoveredTag) {\r\n                    this.mouseHoveredTag = tagMouseEvent;\r\n                    this.tagMouseEnter.emit(tagMouseEvent);\r\n                }\r\n            }\r\n        }\r\n        else if (eventName === 'mousemove' && this.mouseHoveredTag) {\r\n            this.mouseHoveredTag.event = event;\r\n            this.tagMouseLeave.emit(this.mouseHoveredTag);\r\n            this.mouseHoveredTag = undefined;\r\n        }\r\n    };\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], TextInputHighlightComponent.prototype, \"tagCssClass\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Array)\r\n    ], TextInputHighlightComponent.prototype, \"tags\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", HTMLTextAreaElement)\r\n    ], TextInputHighlightComponent.prototype, \"textInputElement\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], TextInputHighlightComponent.prototype, \"textInputValue\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", Object)\r\n    ], TextInputHighlightComponent.prototype, \"tagClick\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", Object)\r\n    ], TextInputHighlightComponent.prototype, \"tagMouseEnter\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", Object)\r\n    ], TextInputHighlightComponent.prototype, \"tagMouseLeave\", void 0);\r\n    __decorate([\r\n        core_1.ViewChild('highlightElement'),\r\n        __metadata(\"design:type\", core_1.ElementRef)\r\n    ], TextInputHighlightComponent.prototype, \"highlightElement\", void 0);\r\n    __decorate([\r\n        core_1.HostListener('window:resize'),\r\n        __metadata(\"design:type\", Function),\r\n        __metadata(\"design:paramtypes\", []),\r\n        __metadata(\"design:returntype\", void 0)\r\n    ], TextInputHighlightComponent.prototype, \"onWindowResize\", null);\r\n    TextInputHighlightComponent = __decorate([\r\n        core_1.Component({\r\n            selector: 'mwl-text-input-highlight',\r\n            template: \"\\n    <div\\n      class=\\\"text-highlight-element\\\"\\n      [ngStyle]=\\\"highlightElementContainerStyle\\\"\\n      [innerHtml]=\\\"highlightedText\\\"\\n      #highlightElement>\\n    </div>\\n  \"\r\n        }),\r\n        __metadata(\"design:paramtypes\", [core_1.Renderer2, core_1.ChangeDetectorRef])\r\n    ], TextInputHighlightComponent);\r\n    return TextInputHighlightComponent;\r\n}());\r\nexports.TextInputHighlightComponent = TextInputHighlightComponent;\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar TextInputHighlightContainerDirective = /** @class */ (function () {\r\n    function TextInputHighlightContainerDirective() {\r\n    }\r\n    TextInputHighlightContainerDirective = __decorate([\r\n        core_1.Directive({\r\n            selector: '[mwlTextInputHighlightContainer]',\r\n            host: {\r\n                '[class.text-input-highlight-container]': 'true'\r\n            }\r\n        })\r\n    ], TextInputHighlightContainerDirective);\r\n    return TextInputHighlightContainerDirective;\r\n}());\r\nexports.TextInputHighlightContainerDirective = TextInputHighlightContainerDirective;\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar TextInputElementDirective = /** @class */ (function () {\r\n    function TextInputElementDirective() {\r\n    }\r\n    TextInputElementDirective = __decorate([\r\n        core_1.Directive({\r\n            selector: 'textarea[mwlTextInputElement]',\r\n            host: {\r\n                '[class.text-input-element]': 'true'\r\n            }\r\n        })\r\n    ], TextInputElementDirective);\r\n    return TextInputElementDirective;\r\n}());\r\nexports.TextInputElementDirective = TextInputElementDirective;\r\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// angular-text-input-highlight.umd.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f84ff9baa095606dad66","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":[\"ng\",\"core\"],\"commonjs\":\"@angular/core\",\"commonjs2\":\"@angular/core\",\"amd\":\"@angular/core\"}\n// module id = 0\n// module chunks = 0 1","export * from './text-input-highlight.module';\r\nexport * from './highlight-tag.interface';\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./src/index.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TextInputHighlightComponent } from './text-input-highlight.component';\r\nimport { TextInputHighlightContainerDirective } from './text-input-highlight-container.directive';\r\nimport { TextInputElementDirective } from './text-input-element.directive';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TextInputHighlightComponent,\r\n    TextInputHighlightContainerDirective,\r\n    TextInputElementDirective\r\n  ],\r\n  imports: [CommonModule],\r\n  exports: [\r\n    TextInputHighlightComponent,\r\n    TextInputHighlightContainerDirective,\r\n    TextInputElementDirective\r\n  ]\r\n})\r\nexport class TextInputHighlightModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./src/text-input-highlight.module.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":[\"ng\",\"common\"],\"commonjs\":\"@angular/common\",\"commonjs2\":\"@angular/common\",\"amd\":\"@angular/common\"}\n// module id = 3\n// module chunks = 0 1","import {\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostListener,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  Output,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport { HighlightTag } from './highlight-tag.interface';\r\n\r\nconst styleProperties = Object.freeze([\r\n  'direction', // RTL support\r\n  'boxSizing',\r\n  'width', // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\r\n  'height',\r\n  'overflowX',\r\n  'overflowY', // copy the scrollbar for IE\r\n\r\n  'borderTopWidth',\r\n  'borderRightWidth',\r\n  'borderBottomWidth',\r\n  'borderLeftWidth',\r\n  'borderStyle',\r\n\r\n  'paddingTop',\r\n  'paddingRight',\r\n  'paddingBottom',\r\n  'paddingLeft',\r\n\r\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\r\n  'fontStyle',\r\n  'fontVariant',\r\n  'fontWeight',\r\n  'fontStretch',\r\n  'fontSize',\r\n  'fontSizeAdjust',\r\n  'lineHeight',\r\n  'fontFamily',\r\n\r\n  'textAlign',\r\n  'textTransform',\r\n  'textIndent',\r\n  'textDecoration', // might not make a difference, but better be safe\r\n\r\n  'letterSpacing',\r\n  'wordSpacing',\r\n\r\n  'tabSize',\r\n  'MozTabSize'\r\n]);\r\n\r\nconst tagIndexIdPrefix = 'text-highlight-tag-id-';\r\n\r\nfunction indexIsInsideTag(index: number, tag: HighlightTag) {\r\n  return tag.indices.start < index && index < tag.indices.end;\r\n}\r\n\r\nfunction overlaps(tagA: HighlightTag, tagB: HighlightTag) {\r\n  return (\r\n    indexIsInsideTag(tagB.indices.start, tagA) ||\r\n    indexIsInsideTag(tagB.indices.end, tagA)\r\n  );\r\n}\r\n\r\nfunction isCoordinateWithinRect(rect: ClientRect, x: number, y: number) {\r\n  return rect.left < x && x < rect.right && (rect.top < y && y < rect.bottom);\r\n}\r\n\r\nfunction escapeHtml(str: string): string {\r\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n}\r\n\r\nexport interface TagMouseEvent {\r\n  tag: HighlightTag;\r\n  target: HTMLElement;\r\n  event: MouseEvent;\r\n}\r\n\r\n@Component({\r\n  selector: 'mwl-text-input-highlight',\r\n  template: `\r\n    <div\r\n      class=\"text-highlight-element\"\r\n      [ngStyle]=\"highlightElementContainerStyle\"\r\n      [innerHtml]=\"highlightedText\"\r\n      #highlightElement>\r\n    </div>\r\n  `\r\n})\r\nexport class TextInputHighlightComponent implements OnChanges, OnDestroy {\r\n  /**\r\n   * The CSS class to add to highlighted tags\r\n   */\r\n  @Input() tagCssClass: string = '';\r\n\r\n  /**\r\n   * An array of indices of the textarea value to highlight\r\n   */\r\n  @Input() tags: HighlightTag[] = [];\r\n\r\n  /**\r\n   * The textarea to highlight\r\n   */\r\n  @Input() textInputElement: HTMLTextAreaElement;\r\n\r\n  /**\r\n   * The textarea value, in not provided will fall back to trying to grab it automatically from the textarea\r\n   */\r\n  @Input() textInputValue: string;\r\n\r\n  /**\r\n   * Called when the area over a tag is clicked\r\n   */\r\n  @Output() tagClick = new EventEmitter<TagMouseEvent>();\r\n\r\n  /**\r\n   * Called when the area over a tag is moused over\r\n   */\r\n  @Output() tagMouseEnter = new EventEmitter<TagMouseEvent>();\r\n\r\n  /**\r\n   * Called when the area over the tag has the mouse is removed from it\r\n   */\r\n  @Output() tagMouseLeave = new EventEmitter<TagMouseEvent>();\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  highlightElementContainerStyle: { [key: string]: string } = {};\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  highlightedText: string;\r\n\r\n  @ViewChild('highlightElement') private highlightElement: ElementRef;\r\n\r\n  private textareaEventListeners: Array<() => void> = [];\r\n\r\n  private highlightTagElements: Array<{\r\n    element: HTMLElement;\r\n    clientRect: ClientRect;\r\n  }>;\r\n\r\n  private mouseHoveredTag: TagMouseEvent | undefined;\r\n\r\n  private isDestroyed = false;\r\n\r\n  constructor(private renderer: Renderer2, private cdr: ChangeDetectorRef) {}\r\n\r\n  /**\r\n   * Manually call this function to refresh the highlight element if the textarea styles have changed\r\n   */\r\n  refresh() {\r\n    const computed: any = getComputedStyle(this.textInputElement);\r\n    styleProperties.forEach(prop => {\r\n      this.highlightElementContainerStyle[prop] = computed[prop];\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.textInputElement) {\r\n      this.textInputElementChanged();\r\n    }\r\n\r\n    if (changes.tags || changes.tagCssClass || changes.textInputValue) {\r\n      this.addTags();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.isDestroyed = true;\r\n    this.textareaEventListeners.forEach(unregister => unregister());\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  @HostListener('window:resize')\r\n  onWindowResize() {\r\n    this.refresh();\r\n  }\r\n\r\n  private textInputElementChanged() {\r\n    const elementType = this.textInputElement.tagName.toLowerCase();\r\n    if (elementType !== 'textarea') {\r\n      throw new Error(\r\n        'The angular-text-input-highlight component must be passed ' +\r\n          'a textarea to the `textInputElement` input. Instead received a ' +\r\n          elementType\r\n      );\r\n    }\r\n\r\n    setTimeout(() => {\r\n      // in case the element was destroyed before the timeout fires\r\n      if (!this.isDestroyed) {\r\n        this.refresh();\r\n\r\n        this.textareaEventListeners.forEach(unregister => unregister());\r\n        this.textareaEventListeners = [\r\n          this.renderer.listen(this.textInputElement, 'input', () => {\r\n            this.addTags();\r\n          }),\r\n          this.renderer.listen(this.textInputElement, 'click', () => {\r\n            this.addTags();\r\n          } ),\r\n          this.renderer.listen(this.textInputElement, 'keyup', () => {\r\n              this.addTags();\r\n          }),\r\n          this.renderer.listen(this.textInputElement, 'change', () => {\r\n              this.addTags();\r\n          }),\r\n          this.renderer.listen(this.textInputElement, 'scroll', () => {\r\n            this.highlightElement.nativeElement.scrollTop = this.textInputElement.scrollTop;\r\n            this.highlightTagElements = this.highlightTagElements.map(tag => {\r\n              tag.clientRect = tag.element.getBoundingClientRect();\r\n              return tag;\r\n            });\r\n          })\r\n        ];\r\n\r\n        // only add event listeners if the host component actually asks for it\r\n        if (this.tagClick.observers.length > 0) {\r\n          const onClick = this.renderer.listen(\r\n            this.textInputElement,\r\n            'click',\r\n            event => {\r\n              this.handleTextareaMouseEvent(event, 'click');\r\n            }\r\n          );\r\n          this.textareaEventListeners.push(onClick);\r\n        }\r\n\r\n        if (this.tagMouseEnter.observers.length > 0) {\r\n          const onMouseMove = this.renderer.listen(\r\n            this.textInputElement,\r\n            'mousemove',\r\n            event => {\r\n              this.handleTextareaMouseEvent(event, 'mousemove');\r\n            }\r\n          );\r\n          const onMouseLeave = this.renderer.listen(\r\n            this.textInputElement,\r\n            'mouseleave',\r\n            event => {\r\n              if (this.mouseHoveredTag) {\r\n                this.tagMouseLeave.emit(this.mouseHoveredTag);\r\n                this.mouseHoveredTag = undefined;\r\n              }\r\n            }\r\n          );\r\n          this.textareaEventListeners.push(onMouseMove);\r\n          this.textareaEventListeners.push(onMouseLeave);\r\n        }\r\n\r\n        this.addTags();\r\n      }\r\n    });\r\n  }\r\n\r\n  private addTags() {\r\n    const textInputValue =\r\n      typeof this.textInputValue !== 'undefined'\r\n        ? this.textInputValue\r\n        : this.textInputElement.value;\r\n\r\n    const prevTags: HighlightTag[] = [];\r\n    const parts: string[] = [];\r\n\r\n    [...this.tags]\r\n      .sort((tagA, tagB) => {\r\n        return tagA.indices.start - tagB.indices.start;\r\n      })\r\n      .forEach(tag => {\r\n        if (tag.indices.start > tag.indices.end) {\r\n          throw new Error(\r\n            `Highlight tag with indices [${tag.indices.start}, ${tag.indices\r\n              .end}] cannot start after it ends.`\r\n          );\r\n        }\r\n\r\n        prevTags.forEach(prevTag => {\r\n          if (overlaps(prevTag, tag)) {\r\n            throw new Error(\r\n              `Highlight tag with indices [${tag.indices.start}, ${tag.indices\r\n                .end}] overlaps with tag [${prevTag.indices.start}, ${prevTag\r\n                .indices.end}]`\r\n            );\r\n          }\r\n        });\r\n\r\n        // TODO - implement this as an ngFor of items that is generated in the template for a cleaner solution\r\n\r\n        const expectedTagLength = tag.indices.end - tag.indices.start;\r\n        const tagContents = textInputValue.slice(\r\n          tag.indices.start,\r\n          tag.indices.end\r\n        );\r\n        if (tagContents.length === expectedTagLength) {\r\n          const previousIndex =\r\n            prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\r\n          const before = textInputValue.slice(previousIndex, tag.indices.start);\r\n          parts.push(escapeHtml(before));\r\n          const cssClass = tag.cssClass || this.tagCssClass;\r\n          const tagId = tagIndexIdPrefix + this.tags.indexOf(tag);\r\n          // text-highlight-tag-id-${id} is used instead of a data attribute to prevent an angular sanitization warning\r\n          parts.push(\r\n            `<span class=\"text-highlight-tag ${tagId} ${cssClass}\">${escapeHtml(\r\n              tagContents\r\n            )}</span>`\r\n          );\r\n          prevTags.push(tag);\r\n        }\r\n      });\r\n    const remainingIndex =\r\n      prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\r\n    const remaining = textInputValue.slice(remainingIndex);\r\n    parts.push(escapeHtml(remaining));\r\n    parts.push('&nbsp;');\r\n    this.highlightedText = parts.join('');\r\n    this.cdr.detectChanges();\r\n    this.highlightTagElements = Array.from(\r\n      this.highlightElement.nativeElement.getElementsByTagName('span')\r\n    ).map((element: HTMLElement) => {\r\n      return { element, clientRect: element.getBoundingClientRect() };\r\n    });\r\n  }\r\n\r\n  private handleTextareaMouseEvent(\r\n    event: MouseEvent,\r\n    eventName: 'click' | 'mousemove'\r\n  ) {\r\n    const matchingTagIndex = this.highlightTagElements.findIndex(elm =>\r\n      isCoordinateWithinRect(elm.clientRect, event.clientX, event.clientY)\r\n    );\r\n    if (matchingTagIndex > -1) {\r\n      const target = this.highlightTagElements[matchingTagIndex].element;\r\n      const tagClass = Array.from(target.classList).find(className =>\r\n        className.startsWith(tagIndexIdPrefix)\r\n      );\r\n      if (tagClass) {\r\n        const tagId = tagClass.replace(tagIndexIdPrefix, '');\r\n        const tag: HighlightTag = this.tags[+tagId];\r\n        const tagMouseEvent = { tag, target, event };\r\n        if (eventName === 'click') {\r\n          this.tagClick.emit(tagMouseEvent);\r\n        } else if (!this.mouseHoveredTag) {\r\n          this.mouseHoveredTag = tagMouseEvent;\r\n          this.tagMouseEnter.emit(tagMouseEvent);\r\n        }\r\n      }\r\n    } else if (eventName === 'mousemove' && this.mouseHoveredTag) {\r\n      this.mouseHoveredTag.event = event;\r\n      this.tagMouseLeave.emit(this.mouseHoveredTag);\r\n      this.mouseHoveredTag = undefined;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./src/text-input-highlight.component.ts","import { Directive } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[mwlTextInputHighlightContainer]',\r\n  host: {\r\n    '[class.text-input-highlight-container]': 'true'\r\n  }\r\n})\r\nexport class TextInputHighlightContainerDirective {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./src/text-input-highlight-container.directive.ts","import { Directive } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: 'textarea[mwlTextInputElement]',\r\n  host: {\r\n    '[class.text-input-element]': 'true'\r\n  }\r\n})\r\nexport class TextInputElementDirective {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./src/text-input-element.directive.ts"],"sourceRoot":""}